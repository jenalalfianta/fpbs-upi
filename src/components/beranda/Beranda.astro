---
import { getCollection } from 'astro:content';
import slugify from 'slugify';

const fixHtml = (url) => url.replace(/\/$/, '') + '/index.html';

const berita = (await getCollection('berita'))
  .filter(item => item.data.lang === 'id')
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))
  .slice(0, 6);

---
  <section class="relative bg-gray-900 text-white">
    <div class="absolute inset-0">
      <img src="/images/beranda/hero.webp" alt="FPBS UPI Hero" class="w-full h-full object-cover object-[60%_35%] md:object-[center_30%]" />
      <div class="absolute inset-0 bg-gradient-to-r from-[#1f0f3d]/85 via-[#311a5c]/70 to-[#1f0f3d]/45"></div>
    </div>
    <div class="relative max-w-screen-xl mx-auto px-4 md:px-8 py-14 md:py-24 flex flex-col md:flex-row md:items-center gap-8 md:gap-10">
      <div class="w-full md:w-3/4 space-y-3 sm:space-y-4">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/12 border border-white/20 text-[10px] sm:text-xs md:text-base font-semibold text-white uppercase tracking-wide">
          Fakultas Pendidikan Bahasa dan Sastra · Universitas Pendidikan Indonesia
        </div>
        <h1 class="text-2xl sm:text-4xl md:text-5xl font-extrabold leading-snug sm:leading-tight text-white drop-shadow-sm max-w-3xl sm:max-w-4xl">
          Pusat unggulan pendidikan, penelitian, dan pengembangan bahasa, sastra, dan budaya berstandar nasional dan internasional.
        </h1>
        <p class="text-sm sm:text-base md:text-lg text-purple-100/90 leading-relaxed max-w-2xl sm:max-w-3xl">
          Membangun generasi kritis, kreatif, dan berdaya saing melalui pendidikan bermutu, riset inovatif, dan jejaring global.
        </p>
        <div class="flex flex-col sm:flex-row gap-3 pt-3 flex-wrap">
          <a href="/profil/program-studi/index.html" class="inline-flex items-center justify-center px-5 py-3 rounded-full bg-white text-purple-800 font-semibold shadow hover:shadow-lg transition-transform hover:-translate-y-0.5">Lihat Program Studi</a>
          <a href="https://pmb.upi.edu/" class="inline-flex items-center justify-center px-5 py-3 rounded-full border border-red-200 bg-white/95 text-red-700 font-semibold shadow-sm hover:shadow transition-colors hover:bg-white" target="_blank" rel="noopener">Penerimaan Mahasiswa Baru</a>
        </div>
      </div>
    </div>
  </section>

<section class="bg-gray-50 dark:bg-gray-800 py-8 md:py-16 px-4 md:px-8">
  <div class="max-w-screen-xl mx-auto flex flex-col md:flex-row md:items-center gap-12">
    
    <div class="w-full md:w-2/3 text-gray-800 dark:text-gray-100 h-full flex flex-col justify-center">
      <h2 class="text-2xl font-bold text-purple-700 dark:text-purple-400 mb-4 uppercase">
        Sambutan Dekan
      </h2>
      <p class="text-justify text-base md:text-lg leading-relaxed mb-4">
        Selamat datang di website Fakultas Pendidikan Bahasa dan Sastra, Universitas Pendidikan Indonesia. Kami berkomitmen untuk memberikan layanan pendidikan bahasa dan sastra yang memiliki peran penting dalam membantu mahasiswa mengembangkan kemampuan berpikir kritis, ekspresi diri, dan pemahaman yang lebih mendalam tentang bahasa dan sastra.
      </p>
    </div>
    
    <div class="w-full md:w-auto flex flex-col items-center text-center">
      <img
        src="/images/beranda/dekanfpbs.webp"
        alt="Wawan Gunawan, M.Ed., Ph.D."
        class="rounded-lg shadow-md object-cover w-full md:w-[340px]"
      />
      <p class="font-semibold mt-4 text-purple-700 dark:text-purple-400 text-base md:text-lg">
        Wawan Gunawan, M.Ed., Ph.D.
      </p>
    </div>
  </div>
</section>

  
  
  <section class="bg-gray-50 dark:bg-gray-800 py-8 md:py-16 px-4 md:px-8 block md:hidden">
    <div class="max-w-screen-xl mx-auto flex flex-col gap-6">
      
      <div class="text-gray-800 dark:text-gray-100">
        <h2 class="text-2xl font-bold text-purple-700 dark:text-purple-400 mb-4 uppercase">Tentang FPBS</h2>
        <p class="text-justify text-base leading-relaxed">
          Pada tahun 1963, FKIP dan Institut Pendidikan Guru (yang berada di bawah Departemen Pendidikan) digabungkan menjadi Institut Keguruan dan Ilmu Pendidikan (IKIP), dan Fakultas Keguruan Sastra dan Seni (FKSS) secara de facto merupakan salah satu fakultasnya. Namun, FKSS diakui secara resmi pada tahun 1964 melalui Instruksi Menteri Pendidikan Tinggi dan Ilmu Pengetahuan No. 128 tahun 1964 yang memiliki 4 (empat) jurusan dan 2 (dua) seksi.
        </p>
      </div>
      
      <div class="aspect-video rounded-lg overflow-hidden shadow-md">
        <iframe 
          class="w-full h-full"
          src="https://www.youtube.com/embed/et3smxctl-U?si=1hg3xOV99Dcqnppl"
          title="Tentang FPBS"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </div>
      
      <div class="text-right">
        <a href="/profil/tentang/index.html" class="inline-block text-sm font-medium text-purple-700 dark:text-purple-400 hover:underline">Selengkapnya »</a>
      </div>
    </div>
  </section>

  
  <section class="bg-gray-50 dark:bg-gray-800 py-8 md:py-16 px-4 md:px-8 hidden md:flex">
    <div class="max-w-screen-xl mx-auto flex flex-row items-center gap-10">
      
      <div class="w-1/2 aspect-video rounded-lg overflow-hidden shadow-md">
        <iframe 
          class="w-full h-full"
          src="https://www.youtube.com/embed/et3smxctl-U?si=1hg3xOV99Dcqnppl"
          title="Tentang FPBS"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </div>
      
      <div class="w-1/2 text-gray-800 dark:text-gray-100">
        <h2 class="text-2xl font-bold text-purple-700 dark:text-purple-400 mb-4 uppercase">Tentang FPBS</h2>
        <p class="text-justify text-base md:text-lg leading-relaxed mb-6">
          Pada tahun 1963, FKIP dan Institut Pendidikan Guru (yang berada di bawah Departemen Pendidikan) digabungkan menjadi Institut Keguruan dan Ilmu Pendidikan (IKIP), dan Fakultas Keguruan Sastra dan Seni (FKSS) secara de facto merupakan salah satu fakultasnya. Namun, FKSS diakui secara resmi pada tahun 1964 melalui Instruksi Menteri Pendidikan Tinggi dan Ilmu Pengetahuan No. 128 tahun 1964 yang memiliki 4 (empat) jurusan dan 2 (dua) seksi.
        </p>
        <a href="/profil/tentang/index.html" class="inline-block text-sm font-medium text-purple-700 dark:text-purple-400 hover:underline">Selengkapnya »</a>
      </div>
    </div>
  </section>

  
  <section class="bg-gray-50 dark:bg-gray-800 py-8 md:py-16 px-4 md:px-8">
    <div class="max-w-screen-xl mx-auto">
      <h2 class="text-2xl font-bold text-purple-700 dark:text-purple-400 mb-8 uppercase">Berita Terbaru</h2>
      <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3">
        {berita.map(item => {
          const url = fixHtml(`/berita/${slugify(item.data.title, { lower: true, strict: true })}`);
          const tampilTanggal = new Date(item.data.pubDate).toLocaleDateString('id-ID', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
          });

          return (
            <article class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col h-full">
              {item.data.image && (
                <a href={url}>
                  <img src={item.data.image.url} alt={item.data.image.alt} class="w-full h-56 object-cover" />
                </a>
              )}
              <div class="px-5 pt-6 pb-8 flex flex-col flex-1">
                <div class="flex justify-between items-center mb-4">
                  <span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-purple-900 dark:text-purple-200">
                    {item.data.tags?.[0] ?? 'Berita'}
                  </span>
                  <span class="text-sm text-gray-500 dark:text-gray-400">{tampilTanggal}</span>
                </div>
                <h3 class="text-base font-semibold text-gray-900 dark:text-white leading-tight mb-4">
                  <a href={url}>{item.data.title}</a>
                </h3>
                <div class="mt-auto text-right">
                  <a href={url} class="text-sm font-medium text-purple-700 dark:text-purple-400 hover:underline">Selengkapnya →</a>
                </div>
              </div>
            </article>
          );
        })}
      </div>
      <div class="text-center mt-8">
        <a href={fixHtml("/berita/page/1")} class="inline-block text-sm font-medium text-purple-700 dark:text-purple-400 hover:underline">Lihat Semua Berita »</a>
      </div>
    </div>
  </section>
